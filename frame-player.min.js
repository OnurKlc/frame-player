class FramePlayer{constructor(a){var t,e,i,r,s=this;this.id=a,this.playStatus={isPlaying:!1,getIsPlaying:function(){return this.isPlaying},setIsPlaying:function(a){this.isPlaying=a,!0===a&&s.on("playTrigger"),!1===a&&parseInt(s.data.activeFrame.getValue())<173&&s.on("pauseTrigger")}},this.data={horizontalFrame:0,verticalFrame:0,bgImageNumber:0,activeFrame:{value:1,getValue:function(){return this.value},setValue:function(a){this.value=a,174===this.value&&s.on("endTrigger")}}},this.framePlayer=document.createElement("div"),this.framePlayer.setAttribute("id","frame-player"),this.framePlayer.onclick=function(a){"frame-player"===a.target.id&&(!0===s.playStatus.getIsPlaying()?s.pause():!0!==s.playStatus.getIsPlaying()&&s.play())},document.getElementById(this.id).appendChild(this.framePlayer),this.playerChildNode='<input type="range" min="1" max="175" value="0" class="slider" id="myRange"><div id="button-container"><button id="playButton"><span>Play</span></button><button id="pauseButton"><span>Pause</span></button></div>',this.framePlayer.appendChild(document.createRange().createContextualFragment(this.playerChildNode)),this.play=function(){!1===this.playStatus.getIsPlaying()&&(this.t=setInterval(function(){s.bgHandler(s.data.activeFrame.getValue(),s.data.bgImageNumber)},100),this.playStatus.setIsPlaying(!0))},this.pause=function(){this.playStatus.setIsPlaying(!1),clearInterval(this.t)},document.getElementById("playButton").onclick=function(){s.play()},document.getElementById("pauseButton").onclick=function(){s.pause()},this.playerHandler=function(a,t,e){e&&(this.framePlayer.style.backgroundImage=`url("http://storage.googleapis.com/alyo/assignments/images/${this.data.bgImageNumber}.jpg")`,a%25<=5?this.data.verticalFrame=0:a%25<=10&&a%25>5?this.data.verticalFrame=25:a%25<=15&&a%25>10?this.data.verticalFrame=50:a%25<=20&&a%25>15?this.data.verticalFrame=75:a%25<=25&&a%25>20&&(this.data.verticalFrame=100)),this.data.horizontalFrame+=25,this.data.horizontalFrame>100&&(this.data.horizontalFrame=0,this.data.verticalFrame+=25),this.data.verticalFrame>100&&(this.data.bgImageNumber=t+1,this.data.bgImageNumber>=7?(clearInterval(this.t),this.playStatus.setIsPlaying(!1),this.data.horizontalFrame=100,this.data.verticalFrame=100):(this.framePlayer.style.backgroundImage=`url("http://storage.googleapis.com/alyo/assignments/images/${this.data.bgImageNumber}.jpg")`,this.data.horizontalFrame=0,this.data.verticalFrame=0)),this.data.activeFrame.setValue(document.getElementById("myRange").value++),this.framePlayer.style.backgroundPosition=this.data.horizontalFrame+"% "+this.data.verticalFrame+"%"},document.getElementById("myRange").onchange=function(){s.pause(),s.data.activeFrame.setValue(this.value),s.bgHandlerSetter(s.data.activeFrame.getValue())},this.bgHandler=function(){this.playerHandler(this.data.activeFrame.getValue(),this.data.bgImageNumber)},this.bgHandlerSetter=function(a,t){a<25?(this.data.bgImageNumber=0,this.playerHandler(a,this.data.bgImageNumber,!0)):a<50&&a>=25?(this.data.bgImageNumber=1,this.playerHandler(a,this.data.bgImageNumber,!0)):a<75&&a>=50?(this.data.bgImageNumber=2,this.playerHandler(a,this.data.bgImageNumber,!0)):a<100&&a>=75?(this.data.bgImageNumber=3,this.playerHandler(a,this.data.bgImageNumber,!0)):a<125&&a>=100?(this.data.bgImageNumber=4,this.playerHandler(a,this.data.bgImageNumber,!0)):a<150&&a>=125?(this.data.bgImageNumber=5,this.playerHandler(a,this.data.bgImageNumber,!0)):a<175&&a>=150&&(this.data.bgImageNumber=6,this.playerHandler(a,this.data.bgImageNumber,!0))};var n=0,l=(new Date).getTime();for(let a=0;a<7;a++)fetch(`http://storage.googleapis.com/alyo/assignments/images/${a}.jpg`).then(function(a){if(7===++n){var t=(new Date).getTime();r&&r(),console.log("download completed in",t-l,"ms")}});this.on=function(a,s){return"downloadcomplete"===a&&(r=s),"play"===a?t=s:("playTrigger"===a&&t&&t(),"pause"===a?e=s:("pauseTrigger"===a&&e&&e(),"end"===a?i=s:void("endTrigger"===a&&i&&i())))}}}